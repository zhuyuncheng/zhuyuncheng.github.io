---
title: 如何利用GitHub Pages 搭建属于自己的静态博客？
category: blog
tag:[blog,github pages]
---
## 序言
近期在`Github`上搭建了自己的个人博客，踩了好多的坑，但是回头发现其实就是很简单的一件事，所以在此把它记录下来，希望给需要的人带来帮助。
> ***注意：***本文的介绍主要是面向**有一定的开发基础**的童鞋，但是考虑到没有基础的童鞋，我在本文的介绍的过程中也会提及到，如何**简单的高效的**搭建自己的个人博客。
## 原理
`GitHub Pages`的原理其实就是在我们**注册`Github`账号**之后，会默认给我们分配一个二级域名，以`username.github.io`的形式存在，当我们创建`repository`仓库并且在`settings -> GitHub Pages -> Source`下指定了编译分支后，Github采用`Jekyll`编译这个`username.github.io`域名下的所有资源，编译成功之后可以通过**`username.github.io/repository_name`**这种形式的URL来访问。
> ***ps：*** 如果`repository`仓库的名称以`username.github.io`的形式命名，系统默认编译`GitHub Pages`的`master`分支，这样我们就可以通过**`username.github.io`**来直接访问主页。

## 注册Github
- 首先，我们需要到[Github主页](https://github.com)注册自己的Github账号，在打开的页面中输入自己的注册信息，点击`Sign up for Github`按钮完成注册。
![Github注册页面](http://upload-images.jianshu.io/upload_images/7392825-be152c5ee4f234aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
- 登陆成功之后，进入主页点击`Create new...`按钮，选择`New reponsitory`选项![Github主页面](http://upload-images.jianshu.io/upload_images/7392825-de5d92b7e4d819a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
- 进入`Create a new repository`页面，`Repository name`对应的文本框中输入仓库的名称，通常会以**`username.github.io`**方式来命名，这样系统默认直接编译`master`分支。
![创建仓库页面](http://upload-images.jianshu.io/upload_images/7392825-6868c9b57cb781d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
>***注意：***如果创建的仓库的名字不是默认的`username.github.io`，而是其他的名字，一定要在当前仓库的`settings -> GitHub Pages -> Source`指定要编译的源，或者创建`gh-pages`分支。
>>If your site repository doesn't have a `master` or `gh-pages` branch, your GitHub Pages publishing source is set to None and your site is not published.
- 在`settings -> GitHub Pages `页面同样可以选择主题样式（推荐）。
![GitHub Pages页面](http://upload-images.jianshu.io/upload_images/7392825-e49001e96e73fb28.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
- 至此，我们可以通过`username.github.io`来访问我们主页啦，默认寻找仓库下面的index.html页面。例如:[zhuyuncheng.github.io](http://zhuyuncheng.github.io)

> 到了这里似乎已经完成了我们的搭建，但是距离我们真正的博客还有一定的差距，下面我会介绍`Jekyll`，更好的完成我们博客搭建。
## Jekyll
- jekyll是一个基于ruby开发的，专用于构建静态网站的程序。它能够将一些动态的组件：模板、liquid代码等构建成静态的页面集合，Github-Page全面引入jekyll作为其构建引擎，这也是学习jekyll的主要动力。同时，除了jekyll引擎本身，它还提供一整套功能，比如web server。我们用jekyll –server启动本地调试就是此项功能。读者可能已经发现，在启动server后，之前我们的项目目录下会多出一个_site目录。jekyll默认将转化的静态页面保存在_site目录下，并以某种方式组织。使用jekyll构建博客是十分适合的，因为其内建的对象就是专门为blog而生的，在后面的逐步介绍中读者会体会到这一点。但是需要强调的是，jekyll并不是博客软件，跟workpress之类的完全两码事，它仅仅是个一次性的模板解析引擎，它不能像动态服务端脚本那样处理请求。
### Jekyll是如何工作的
```bash
|-- _config.yml
|-- _includes
|-- _layouts
|   |-- default.html
|   |-- post.html
|-- _posts
|   |-- 2017-08-13-open-source-is-good.html
|   |-- 2017-04-26-hello-world.html
|-- _site
`-- index.html
```
- _config.yml: 保存配置，该配置将影响jekyll构造网站的各种行为。
- _includes：该目录下的文件可以用来作为公共的内容被其他文章引用，就跟C语言include头文件的机制完全一样，jekyll在解析时会对`{ % include file.ext %}`标记扩展成对应的在_includes文件夹中的文件。
- _layouts：该目录下的文件作为主要的模板文件。
- _posts：文章或网页应当放在这个目录中，但需要注意的是，文章的文件名必须是YYYY-MM-DD-link。
- _site：jekyll默认的转化结果存放的目录。
>[Jekyll语法：https://alfred-sun.github.io/blog/2015/01/10/jekyll-liquid-syntax-documentation/](https://alfred-sun.github.io/blog/2015/01/10/jekyll-liquid-syntax-documentation/)

###Jekyll安装
>***注意：*** 
&nbsp;&nbsp;&nbsp;&nbsp;如果想要本地用Jekyll编译测试的，可以安装Jekyll。
&nbsp;&nbsp;&nbsp;&nbsp;如果只是单纯的搭建一个博客而已，我个人推荐Github线上编译，直接push上去代码，等待一会儿，Github即可自己编译提交的代码，通过前面提到的URL访问即可（建议清空缓存再访问）。
- Jekyll 是基于Ruby的，所以首先需要安装Ruby。
####安装Ruby
- Linux(Debian 或 Ubuntu)
```bash
$ sudo apt-get install ruby-full
```
- Linux(CentOS、Fedora 或 RHEL)
```bash
$ sudo yum install ruby
```
- Homebrew（OS X）
```bash
$ brew install ruby
```
- Windows 通过`RubyDevKit`安装，从这个页面下载DevKit：[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)
解压完成之后，用cmd进入到刚才解压的目录下，运行下面命令，该命令会生成config.yml。
```bash
$ ruby dk.rb init
```
config.yml文件实际上是检测系统安装的ruby的位置并记录在这个文件中，以便稍后使用。但上面的命令只针对使用rubyinstall安装的ruby有效，如果是其他方式安装的话，需要手动修改config.yml。我生成的config.yml文件内容如下：
```bash
# This configuration file contains the absolute path locations of all
# installed Rubies to be enhanced to work with the DevKit. This config
# file is generated by the 'ruby dk.rb init' step and may be modified
# before running the 'ruby dk.rb install' step. To include any installed
# Rubies that were not automagically discovered, simply add a line below
# the triple hyphens with the absolute path to the Ruby root directory.
#
# Example:
#
# ---
# - C:/ruby19trunk
# - C:/ruby192dev
#
---
- C:/Ruby193
```
最后，执行如下命令，执行安装：
```bash
$ ruby setup.rb
```
或者
```bash
$ ruby setup.rb install
```
可以通过执行一下命令查看ruby是否安装成功，出现以下信息则已经安装成功了，显示目前安装Ruby的版本号，这个版本号建议是2.2以上的版本，因为2.2以下的版本不在维护。
```bash 
$ ruby -v
ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin16]
```
####安装Jekyll
执行下面gem命令即可全自动搞定：
```bash
$ gem install jekyll
```
安装好了之后我们可以进入我们需要jekyll编译的项目目录下面执行
```bash
$ jekyll --server --safe
```
jekyll 会默认在localhost的4000端口监听Http请求，可以通过[http://localhost:4000/index.html](http://localhost:4000/index.html)访问项目的主页。

## jekyll不安装采用线上编译
直接提交代码之后，进入commits页面可以看到提交的记录，每条记录黄色的标记就是正在部署jekyll中，绿色的对号说明部署成功了，编译失败会以红色的叉号标注，并且会邮件通知编译失败。
![QQ20170816-224917@2x.png](http://upload-images.jianshu.io/upload_images/7392825-92ae844eddb273b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![QQ20170816-225046@2x.png](http://upload-images.jianshu.io/upload_images/7392825-ab4af20fe7b9b7cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
